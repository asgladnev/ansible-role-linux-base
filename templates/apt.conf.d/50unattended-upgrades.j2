//============================================================
// Auto-generated by Ansible
// Do not edit manually! Changes will be overwritten.
//============================================================

{# Origins for automatic upgrades, usually security updates #}
Unattended-Upgrade::Origins-Pattern {
        "origin=Debian,codename=${distro_codename}-security";
};

{# ------------------------------------------------------------ #}
{# Disable AC power check on systems without battery            #}
{# ------------------------------------------------------------ #}
{% if unattended_upgrades.skip_on_battery is defined %}
Unattended-Upgrade::Skip-If-On-Battery "{{ unattended_upgrades.skip_on_battery }}";
{% endif %}

{# ------------------------------------------------------------ #}
{# Automatic cleanup settings                                   #}
{# Remove unused dependencies and old kernel packages           #}
{# Auto-fix interrupted dpkg operations and minimal steps       #}
{# ------------------------------------------------------------ #}
{% if unattended_upgrades.remove_unused_dependencies is defined %}
Unattended-Upgrade::Remove-Unused-Dependencies "{{ unattended_upgrades.remove_unused_dependencies }}";
{% endif %}
{% if unattended_upgrades.remove_unused_kernel is defined %}
Unattended-Upgrade::Remove-Unused-Kernel-Packages "{{ unattended_upgrades.remove_unused_kernel }}";
{% endif %}
{% if unattended_upgrades.auto_fix_dpkg is defined %}
Unattended-Upgrade::AutoFixInterruptedDpkg "{{ unattended_upgrades.auto_fix_dpkg }}";
{% endif %}
{% if unattended_upgrades.minimal_steps is defined %}
Unattended-Upgrade::MinimalSteps "{{ unattended_upgrades.minimal_steps }}";
{% endif %}

{# ------------------------------------------------------------ #}
{# Automatic reboot settings                                     #}
{# Reboot system if required and set specific reboot time       #}
{# ------------------------------------------------------------ #}
{% if unattended_upgrades.auto_reboot is defined %}
Unattended-Upgrade::Automatic-Reboot "{{ unattended_upgrades.auto_reboot }}";
{% endif %}
{% if unattended_upgrades.reboot_time is defined %}
Unattended-Upgrade::Automatic-Reboot-Time "{{ unattended_upgrades.reboot_time }}";
{% endif %}

{# ------------------------------------------------------------ #}
{# Automatic downgrades packages                                #}
{# ------------------------------------------------------------ #}
{% if unattended_upgrades.allow_downgrades is defined %}
Unattended-Upgrade::Allow-downgrades "{{ unattended_upgrades.allow_downgrades }}";
{% endif %}

{# ------------------------------------------------------------ #}
{# Email notifications                                           #}
{# Send email to administrator, optionally only on errors       #}
{# ------------------------------------------------------------ #}
{% if unattended_upgrades.mail is defined %}
Unattended-Upgrade::Mail "{{ unattended_upgrades.mail }}";
{% endif %}
{% if unattended_upgrades.mail_only_error is defined %}
Unattended-Upgrade::MailOnlyOnError "{{ unattended_upgrades.mail_only_error }}";
{% endif %}

{# ------------------------------------------------------------ #}
{# Package blacklist                                             #}
{# List packages that should not be automatically upgraded      #}
{# ------------------------------------------------------------ #}
{% if unattended_upgrades.blacklist_packages is defined %}
Unattended-Upgrade::Package-Blacklist {
{% for package in unattended_upgrades.blacklist_packages | default([]) %}
    "{{ package }}";
{% endfor %}
};
{% endif %}
